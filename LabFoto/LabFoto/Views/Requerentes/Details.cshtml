@model LabFoto.Models.Tables.Requerente

@using Microsoft.Extensions.Options;
@inject IOptions<AppSettings> Settings

@{
    ViewData["Title"] = "Detalhes";
}
<div class="row">
    <div class="col-md-5"></div>
    <div class="ui people shape" id="div_@Model.ID">
        <div class="sides">
            <div class="side active requerenteSide" id="divDetails_@Model.ID">
                <partial name="_RequerenteDetailsPartial" model="Model" />
            </div>
            <div class="side requerenteSide" id="divEditar_@Model.ID">

            </div>
        </div>
    </div>
</div>

<div class="h5 ml-2">Serviços</div>
<div class="ui grid">
    <div class="four wide column">
        <div class="ui vertical fluid tabular menu">
            @foreach (var ser in Model.Servicos)
            {
                <a class="item" id="list_nome" onclick="requerenteServicoDetails(`div_segment`, `@ser.ID`)" data-toggle="list" role="tab" aria-controls="home" href="#list-segment">@ser.Nome</a>
            }
        </div>
    </div>
    <div class="twelve wide stretched column">
        <div class="ui segment" id="list-segment" role="tabpanel" aria-labelledby="list_nome">
            <div id="div_segment"></div>
        </div>
    </div>
</div>


<div class="ui card" id="loadingServico" hidden>
    <div class="card-header pt-5 pb-3">
        <div class="ui placeholder">
            <div class="header">
                <div class="full line"></div>
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="ui grid">
            <div class="eight wide column">
                <div class="ui placeholder">
                    <div class="full line"></div>
                    <div class="full line"></div>
                    <div class="full line"></div>
                </div>
            </div>
            <div class="eight wide column">
                <div class="ui placeholder">
                    <div class="full line"></div>
                    <div class="full line"></div>
                    <div class="full line"></div>
                </div>
            </div>
        </div>
        <div class="ui grid">
            <div class="eight wide column">
                <div class="ui placeholder">
                    <div class="full line"></div>
                    <div class="full line"></div>
                    <div class="full line"></div>
                    <div class="full line"></div>
                </div>
            </div>
            <div class="eight wide column">
                <div class="ui placeholder">
                    <div class="full line"></div>
                    <div class="full line"></div>
                    <div class="full line"></div>
                    <div class="full line"></div>
                </div>
            </div>
        </div>
        <div class="ui grid">
            <div class="sixteen wide column">
                <div class="ui placeholder" id="observacoesPlaceholder">
                    <div class="full line"></div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts
{
    <script>

        editarRequerenteDetails = (divEdicao, divRequerente, idRequerente) => {
            flipCard(`${divRequerente}`, 'flip back');
            // $(`#${divRequerente}`).shape('flip back');
            requerenteFormsLoadAjax(`${divEdicao}`, siteUrl + `/Requerentes/EditDetails/${idRequerente}`);
        };

        // Detalhes do serviço com o id que recebe por parametro
        // e envia para o div com o id que recebe por parametro uma partialView com os detalhes do serviço
        requerenteServicoDetails = (divId, servicoId) => {
            $(`#${divId}`).html($(`#loadingServico`));
            $(`#loadingServico`).removeAttr('hidden');
            $(`#${divId}`).load(siteUrl + `/Servicos/DetailsAjax/${servicoId}`);
        };

    </script>
}